<!DOCTYPE html>

<!-- https://stackoverflow.com/questions/7966329/document-getelementbyid-not-working-in-mozila -->
<!-- https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range -->

<html>
<head>

	<title>Ways to design the worst UX</title>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
	<script src="js/tabletop.js"></script>


	<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/themes/redmond/jquery-ui.css">
	
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<style type="text/css">
			body{
				background-color:#6f5499;
				text-align: center;
				font-family: Helvetica,Arial,sans-serif;
			}

			header{
				padding-top: 50px;
			}

			section{
				padding-bottom: 50px;
				height:300px;
			}
			h1{
				font-size: 60px;
				line-height:1;
				color: #fff;
				
			}
			a{
				color:#fff;
			}	
			span{
				color:#fff;
			}
				</style>
</head>
<body class="container">


 <script type="text/javascript">
	var statejson = new Array();
	var res,res2;
	var number = 0;
	var total;

				/**
				 * Returns a random integer between min and max
				 * Using Math.round() will give you a non-uniform distribution!
				 */
				function getRandomInt (min, max) {
				    return Math.floor(Math.random() * (max - min + 1)) + min;
				};

				//function called once tabletop.js completes spreadsheet load
    		function getStateInfo(data) {

    				//jquery function which will make a json out of the spreadsheet data
    	      $.each(data.Sheet1.elements, function(key, data) {
    	        		 var state_data = { 'reason' : data.reason , 'twitter':data.twitter}

            	statejson.push(state_data);
    	         });

    	      shuffle();

    	      		

    	      //console.log("Statejson L", statejson.length);
    	      //console.log("Statejson", statejson[0].reason);
    	      
    	      
				};

				function shuffle(){
						var next = getRandomInt (0, statejson.length - 1);
						console.log(next);
						while(next == number){
							next = getRandomInt (0, statejson.length - 1);
						}
						number = next;
						res = statejson[number].reason;
						res2 = statejson[number].twitter;// set limits
    	      document.getElementById('reason').textContent = res; 
    	      document.getElementById('twitter').textContent = res2;
    	      
    	      if(res2 != null)
    	      document.getElementById('link').href="http://twitter.com/"+res2;
    	      total = statejson.length;
		document.getElementById('total').textContent = total;
    	      console.log(number);
    	       console.log(res2);
				};
 
     $(document).ready(function(){
        
        Tabletop.init( {
        	key: "0Ap2hoxVM_haNdE5TelJnRTM0R0padmJLY1ZSSHRJNmc",  //link that is part of the published sheet url      
        	callback: getStateInfo,        
        	simpleSheet: false 
        } );


                   
    });

        
        

 </script>

  <header class="row">
      <span><span id="total"></span> ways to design the worst User Experience - A fine place to learn how not to do it.</span>
  </header>
	

	<section>
 	
 	<h1><div id='reason'></div></h1>
 	<div>&mdash;<a href="" id='link' target='_blank'> <span id='twitter'></span></a></div>
 	
 	</section>

	<button type="button" class="btn btn-default btn-lg" onclick="shuffle()">One more please</button>



</body>
</html>
